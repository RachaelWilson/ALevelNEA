import tkinter as tk
import random

class Flashcard:
    def __init__(self, question, answer): #In this class, I am defining the variables that are to be used throughout the project.
        self.question = question
        self.answer = answer
        
class FlashcardApplication: # Declaring what will be used in the FlashcardApplication window.
    def __init__(self, root):
        self.root = root
        self.flashcards = []
        self.correct_answers = 0
        self.incorrect_answers = 0
        self.current_flashcard_index = 0
        self.users = {}
        self.create_widgets()

    def create_widgets(self):
        self.username_label = tk.Label(self.root, text="Please enter a username: ")
        self.username_label.grid(row=0, column=0)
        self.username_entry = tk.Entry(self.root)
        self.username_entry.grid(row=0, column=1)

        self.password_label = tk.Label(self.root, text="Please enter a password: ")
        self.password_label.grid(row=1, column=0)
        self.password_entry = tk.Entry(self.root, show="*")
        self.password_entry.grid(row=1, column=1)

        self.register_button = tk.Button(self.root, text="Register here", command=self.user_registration)
        self.register_button.grid(row=2, column=0)

        self.login_button = tk.Button(self.root, text="Login Here", command=self.login)
        self.login_button.grid(row=2, column=1)

    def user_registration(self):
        username = self.username_entry.get()
        password = self.password_entry.get()
        if username in self.users:
            print("Username already exists. Please choose a different username.")
            return
        self.users[username] = password
        print("Account registered successfully!")

    def login(self):
        username = self.username_entry.get()
        password = self.password_entry.get()
        if username in self.users and self.users[username] == password:
            print("Login successful!")
            self.root.destroy()
            self.create_flashcard_program()
        else:
            print("Invalid username or password. Please re-enter information.")
    
    def create_flashcard_program(self):
        flashcard_root = tk.Tk()
        flashcard_root.title("Flashcard Application")

        # Below I am creating the buttons for the front end of the application. AKA Widgets
        self.add_flashcard_button = tk.Button(flashcard_root, text="Add Flashcard", command=self.add_flashcard)
        self.add_flashcard_button.pack()

        self.study_flashcards_button = tk.Button(flashcard_root, text="Study Flashcards", command=self.study_flashcards)
        self.study_flashcards_button.pack()

        self.test_yourself_button = tk.Button(flashcard_root, text="Test", command=self.test_yourself)
        self.test_yourself_button.pack()

        self.wrong_answers_button = tk.Button(flashcard_root, text="Wrong Answers", command=self.wrong_answers)
        self.wrong_answers_button.pack()

        self.your_score_button = tk.Button(flashcard_root, text="Score", command = self.your_score) # The command line ensures that the output can be seen in the terminal by the user.
        self.your_score_button.pack()

    def add_flashcard(self, question=None, answer=None):  #This will output a question to the terminal instructing the user to write a question for a flashcard.
        if question is None:
            question = input("Enter a question: ")
        if answer is None:
            answer = input("Enter the answer: ")
        flashcard = Flashcard(question, answer)
        self.flashcards.append(flashcard)

    def study_flashcards(self):
        for flashcard in self.flashcards:
            input(f"Question: {flashcard.question}\n Press to reveal answer")
            print(f"Answer: {flashcard.answer}")

    def test_yourself(self):
        random.shuffle(self.flashcards)
        for flashcard in self.flashcards:
            user_answer = input(f"Question: {flashcard.question}\n Your Answer: ")
            if user_answer.lower() == flashcard.answer.lower():
                print("That is correct!")
                self.correct_answers += 1

    def wrong_answers(self):
        if self.incorrect_answers == 0:
            print("No incorrect answers detected.")
            return
        print("Incorrect answers detected.")
        for flashcard in self.flashcards:
            user_answer = input(f"Question: {flashcard.question}\n Correct Answer: {flashcard.answer}\n Press enter to continue on")
        self.incorrect_answers = 0

    def your_score(self):
        print(f"Correct Answers: {self.correct_answers}")
        print(f"Incorrect Answers: {self.incorrect_answers}")

root = tk.Tk()
app = FlashcardApplication(root) #To run application
root.configure(bg="#CDEBC5") # Used geometry to choose the sizing of my window and configure to add a background colour.
root.mainloop()
